(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{23:function(t,e,a){t.exports=a(50)},28:function(t,e,a){},29:function(t,e,a){},50:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),i=a(22),c=a.n(i),r=(a(28),a(3)),l=a(4),s=a(6),u=a(5),h=(a(29),a(7)),d=a.n(h);function p(t){return o.a.createElement("img",{src:"".concat("http://openweathermap.org/img/wn/").concat(t.type,"@2x.png"),alt:t.description})}var m=a(9),g=a(11);function v(t){return o.a.createElement("form",{action:"submit"},o.a.createElement("label",{htmlFor:t.id},"Search Location "),o.a.createElement("input",{onChange:t.change,type:"text",id:t.id,placeholder:t.placeholder}),o.a.createElement("button",{onClick:t.submit,type:"submit"},o.a.createElement(m.a,{icon:g.b})),o.a.createElement("button",{onClick:t.getLocation},o.a.createElement(m.a,{icon:g.a})))}var b=function(t){Object(s.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this)).updateUnits=t.updateUnits,n}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("button",{value:"metric",onClick:this.updateUnits},"metric")," /",o.a.createElement("button",{value:"imperial",onClick:this.updateUnits},"imperial")," /",o.a.createElement("button",{value:"kelvin",onClick:this.updateUnits},"kelvin"))}}]),a}(n.Component),f=function(t){Object(s.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this)).getLocation=t.getLocation,n.submit=t.submit,n.change=t.change,n.updateUnits=t.updateUnits,console.log(n.updateUnits),n}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Weather App"),o.a.createElement(b,{updateUnits:this.updateUnits}),o.a.createElement(v,{getLocation:this.getLocation,submit:this.submit,change:this.change,id:"search-location",placeholder:"Enter Location"}))}}]),a}(n.Component),E=function(t){Object(s.a)(a,t);var e=Object(u.a)(a);function a(){var t;return Object(r.a)(this,a),(t=e.call(this)).getLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){t.setState({lat:e.coords.latitude,lon:e.coords.longitude});var a=t.state,n=a.lat,o=a.lon,i=a.units;t.getCity(n,o),t.getWeather(n,o,i)})):console.log("No geolocation")},t.searchLocation=function(e){var a;e.preventDefault(),console.log("location search"),t.state.location&&(a=t.state.location,d()({method:"GET",url:"https://us1.locationiq.com/v1/search.php",dataResponse:"json",params:{format:"json",key:"a2f6bb0bb601e5",q:a}})).then((function(e){var a=e.data[0];console.log(a),t.setState({lat:a.lat,lon:a.lon});var n=t.state,o=n.lat,i=n.lon,c=n.units;t.getCity(o,i),t.getWeather(o,i,c)}))},t.updateLocationState=function(e){t.setState({location:e.target.value})},t.updateUnits=function(e){console.log(e.target.value),t.setState({units:e.target.value},(function(){var e=t.state,a=e.lat,n=e.lon,o=e.units;t.getWeather(a,n,o)}))},t.state={lat:0,lon:0,location:"",weather:{},city:"",province:"",country:"",weatherLoading:!0,locationLoading:!0,units:"metric"},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getLocation()}},{key:"getCity",value:function(t,e){var a,n,o=this;(a=t,n=e,d()({method:"GET",url:"https://us1.locationiq.com/v1/reverse.php",dataResponse:"json",params:{format:"json",key:"a2f6bb0bb601e5",lat:a,lon:n}})).then((function(t){console.log(t.data.address),o.setState({city:t.data.address.city,province:t.data.address.state,country:t.data.address.country,locationLoading:!1})}))}},{key:"getWeather",value:function(t,e,a){var n=this;(function(t,e,a){return d()({method:"GET",url:"https://api.openweathermap.org/data/2.5/onecall",dataResponse:"json",params:{appid:"4de58afe7c0aa78a01498b122c46d7e2",units:a,lat:t,lon:e}})})(t,e,a).then((function(t){console.log(t.data),n.setState({weather:t.data,weatherLoading:!1})}))}},{key:"render",value:function(){console.log("render");var t=this.state,e=t.weather,a=t.weatherLoading,n=t.locationLoading,i=t.city,c=t.province,r=t.country,l=t.units;return o.a.createElement("div",{className:"App"},o.a.createElement(f,{getLocation:this.getLocation,submit:this.searchLocation,change:this.updateLocationState,updateUnits:this.updateUnits}),a||n?o.a.createElement("p",null,"Loading..."):o.a.createElement("div",null,o.a.createElement("h2",null,"".concat(i?"".concat(i,", "):"").concat(c,", ").concat(r)),o.a.createElement("h3",null,e.current.temp," ","metric"===l?"\xb0C":"imperial"===l?"\xb0F":"K"),o.a.createElement(p,{type:e.current.weather[0].icon,description:e.current.weather[0].description})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.e7873be0.chunk.js.map